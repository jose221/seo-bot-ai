#!/bin/zsh

# Colores
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
CYAN='\033[0;36m'
MAGENTA='\033[0;35m'
NC='\033[0m' # No Color

clear
echo -e "${CYAN}"
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘          ğŸ“š GUÃA DE USO - GENERADOR DE MÃ“DULOS            â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo -e "${NC}"
echo ""

echo -e "${YELLOW}â•â•â• ARQUITECTURA DEL PROYECTO â•â•â•${NC}"
echo ""
echo -e "${BLUE}Domain Layer${NC} (Reglas de negocio)"
echo "  â””â”€â”€ domain/"
echo "      â”œâ”€â”€ models/           â†’ Entidades del dominio"
echo "      â”œâ”€â”€ repositories/     â†’ Interfaces de repositorios"
echo "      â””â”€â”€ mappers/          â†’ Transformadores DTO â†” Model"
echo ""
echo -e "${BLUE}Infrastructure Layer${NC} (ImplementaciÃ³n tÃ©cnica)"
echo "  â””â”€â”€ infrastructure/"
echo "      â”œâ”€â”€ dto/              â†’ Data Transfer Objects"
echo "      â”œâ”€â”€ repositories/     â†’ ImplementaciÃ³n de repositorios"
echo "      â””â”€â”€ services/         â†’ Servicios HTTP"
echo ""
echo -e "${BLUE}Application Layer${NC} (Casos de uso)"
echo "  â””â”€â”€ application/"
echo "      â””â”€â”€ use-cases/        â†’ LÃ³gica de aplicaciÃ³n"
echo ""

echo -e "${YELLOW}â•â•â• FLUJO DE CREACIÃ“N DE MÃ“DULOS â•â•â•${NC}"
echo ""
echo -e "${GREEN}OpciÃ³n 1: MÃ³dulo Completo (Recomendado)${NC}"
echo "  1. Ejecutar: ${CYAN}./dev.sh${NC}"
echo "  2. Seleccionar opciÃ³n ${GREEN}4${NC} (Crear MÃ³dulo Completo)"
echo "  3. Seguir el asistente paso a paso"
echo "  4. Se crearÃ¡n automÃ¡ticamente:"
echo "     â†’ Models (Request/Response)"
echo "     â†’ DTOs"
echo "     â†’ Mappers"
echo "     â†’ Service"
echo "     â†’ Repository (Interface + Implementation)"
echo ""
echo -e "${GREEN}OpciÃ³n 2: CreaciÃ³n Individual${NC}"
echo "  Orden recomendado:"
echo "  ${CYAN}1.${NC} Model     â†’ Define las entidades"
echo "  ${CYAN}2.${NC} Service   â†’ Implementa la lÃ³gica HTTP"
echo "  ${CYAN}3.${NC} Repository â†’ Conecta con el dominio"
echo ""

echo -e "${YELLOW}â•â•â• COMANDOS DISPONIBLES â•â•â•${NC}"
echo ""
echo -e "${CYAN}./dev.sh${NC}"
echo "  MenÃº principal interactivo"
echo ""
echo -e "${CYAN}./commands/model.sh${NC}"
echo "  Crea: Models + DTOs + Mappers"
echo "  Opciones: Request/Response o Model simple"
echo ""
echo -e "${CYAN}./commands/service.sh${NC}"
echo "  Crea: Service con integraciÃ³n automÃ¡tica de Mapper"
echo ""
echo -e "${CYAN}./commands/repository.sh${NC}"
echo "  Crea: Repository (Domain + Implementation)"
echo "  Auto-detecta: Models y Services relacionados"
echo "  Auto-actualiza: app.config.ts"
echo ""
echo -e "${CYAN}./commands/usecase.sh${NC}"
echo "  Crea: Use Case en Application Layer"
echo "  Auto-detecta: Repositories disponibles"
echo ""
echo -e "${CYAN}./commands/validate.sh${NC}"
echo "  Valida la estructura del proyecto"
echo "  Muestra estadÃ­sticas de mÃ³dulos"
echo ""
echo -e "${CYAN}./commands/inspect.sh${NC}"
echo "  Inspecciona un mÃ³dulo especÃ­fico"
echo "  Muestra todos los componentes y exports"
echo ""

echo -e "${YELLOW}â•â•â• EJEMPLOS DE USO â•â•â•${NC}"
echo ""
echo -e "${MAGENTA}Ejemplo 1: Crear mÃ³dulo de autenticaciÃ³n${NC}"
echo "  $ ./dev.sh"
echo "  OpciÃ³n: 4 (MÃ³dulo Completo)"
echo "  Directorio: ${GREEN}auth${NC}"
echo "  Archivo: ${GREEN}auth${NC}"
echo "  Request: ${GREEN}SÃ­${NC}"
echo "  Response: ${GREEN}SÃ­${NC}"
echo "  DTO: ${GREEN}SÃ­${NC}"
echo "  Mapper: ${GREEN}SÃ­${NC}"
echo ""
echo "  ${CYAN}Resultado:${NC}"
echo "  âœ“ src/app/domain/models/auth/request/auth-request.model.ts"
echo "  âœ“ src/app/domain/models/auth/response/auth-response.model.ts"
echo "  âœ“ src/app/infrastructure/dto/request/auth-request.dto.ts"
echo "  âœ“ src/app/infrastructure/dto/response/auth-response.dto.ts"
echo "  âœ“ src/app/domain/mappers/auth/auth.mapper.ts"
echo "  âœ“ src/app/infrastructure/services/auth/auth.service.ts"
echo "  âœ“ src/app/domain/repositories/auth/auth.repository.ts"
echo "  âœ“ src/app/infrastructure/repositories/auth/auth.implementation.repository.ts"
echo ""

echo -e "${MAGENTA}Ejemplo 2: Crear un use case${NC}"
echo "  $ ./dev.sh"
echo "  OpciÃ³n: 5 (Crear Use Case)"
echo "  Directorio: ${GREEN}auth${NC}"
echo "  Caso de uso: ${GREEN}login${NC}"
echo ""
echo "  ${CYAN}Resultado:${NC}"
echo "  âœ“ src/app/application/use-cases/auth/login.use-case.ts"
echo "  âœ“ Auto-detecta y conecta con AuthRepository"
echo ""

echo -e "${YELLOW}â•â•â• CONVENCIONES DE NOMBRES â•â•â•${NC}"
echo ""
echo "Directorio:  ${GREEN}kebab-case${NC}  (ej: auth, user-profile)"
echo "Archivo:     ${GREEN}kebab-case${NC}  (ej: auth, user-profile)"
echo "Clase Model: ${GREEN}PascalCase${NC} + Model  (ej: AuthModel)"
echo "Clase DTO:   ${GREEN}PascalCase${NC} + Dto    (ej: AuthDto)"
echo "Clase Service: ${GREEN}PascalCase${NC} + Service (ej: AuthService)"
echo "Clase Repository: ${GREEN}PascalCase${NC} + Repository (ej: AuthRepository)"
echo ""

echo -e "${YELLOW}â•â•â• VENTAJAS DEL SISTEMA â•â•â•${NC}"
echo ""
echo -e "${GREEN}âœ“${NC} HomologaciÃ³n del cÃ³digo"
echo -e "${GREEN}âœ“${NC} Auto-detecciÃ³n de dependencias"
echo -e "${GREEN}âœ“${NC} ActualizaciÃ³n automÃ¡tica de configuraciÃ³n"
echo -e "${GREEN}âœ“${NC} ValidaciÃ³n de estructura"
echo -e "${GREEN}âœ“${NC} Limpieza segura de mÃ³dulos"
echo -e "${GREEN}âœ“${NC} InspecciÃ³n detallada"
echo ""

echo -e "${CYAN}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo -e "  Para comenzar, ejecuta: ${GREEN}./dev.sh${NC}"
echo -e "${CYAN}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo ""

