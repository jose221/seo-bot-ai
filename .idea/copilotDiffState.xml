<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/models/audit.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/models/audit.py" />
              <option name="originalContent" value="&quot;&quot;&quot;&#10;Modelo de Reporte de Auditoría.&#10;Almacena resultados de análisis Lighthouse + IA.&#10;&quot;&quot;&quot;&#10;from sqlmodel import SQLModel, Field, Column&#10;from sqlalchemy import JSON, String&#10;from typing import Optional, Dict, Any&#10;from uuid import UUID, uuid4&#10;from datetime import datetime&#10;from enum import Enum&#10;&#10;&#10;class AuditStatus(str, Enum):&#10;    &quot;&quot;&quot;Estado del proceso de auditoría&quot;&quot;&quot;&#10;    PENDING = &quot;pending&quot;&#10;    IN_PROGRESS = &quot;in_progress&quot;&#10;    COMPLETED = &quot;completed&quot;&#10;    FAILED = &quot;failed&quot;&#10;&#10;&#10;class AuditReport(SQLModel, table=True):&#10;    &quot;&quot;&quot;&#10;    Reporte de auditoría SEO/Performance.&#10;    Contiene datos estructurados de Lighthouse y análisis de IA.&#10;    &quot;&quot;&quot;&#10;    __tablename__ = &quot;audit_reports&quot;&#10;&#10;    id: UUID = Field(default_factory=uuid4, primary_key=True)&#10;&#10;    # Relaciones&#10;    web_page_id: UUID = Field(foreign_key=&quot;web_pages.id&quot;, index=True)&#10;    user_id: UUID = Field(foreign_key=&quot;users.id&quot;, index=True)&#10;&#10;    # Estado (guardado como string en la BD)&#10;    status: AuditStatus = Field(&#10;        default=AuditStatus.PENDING,&#10;        sa_column=Column(String, nullable=False, default=AuditStatus.PENDING.value)&#10;    )&#10;&#10;    # Datos de Lighthouse (JSONB)&#10;    lighthouse_data: Optional[Dict[str, Any]] = Field(&#10;        default=None,&#10;        sa_column=Column(JSON),&#10;        description=&quot;Métricas completas de Lighthouse&quot;&#10;    )&#10;&#10;    seo_analysis: Optional[Dict[str, Any]] = Field(&#10;        default=None,&#10;        sa_column=Column(JSON),&#10;        description=&quot;Seo analyzer data&quot;&#10;    )&#10;&#10;    # Análisis de IA (JSONB)&#10;    ai_suggestions: Optional[Dict[str, Any]] = Field(&#10;        default=None,&#10;        sa_column=Column(JSON),&#10;        description=&quot;Sugerencias y análisis generados por IA&quot;&#10;    )&#10;&#10;    # Métricas clave (para búsquedas rápidas)&#10;    performance_score: Optional[float] = Field(default=None, ge=0, le=100)&#10;    seo_score: Optional[float] = Field(default=None, ge=0, le=100)&#10;    accessibility_score: Optional[float] = Field(default=None, ge=0, le=100)&#10;    best_practices_score: Optional[float] = Field(default=None, ge=0, le=100)&#10;&#10;    # Core Web Vitals&#10;    lcp: Optional[float] = Field(default=None, description=&quot;Largest Contentful Paint (ms)&quot;)&#10;    fid: Optional[float] = Field(default=None, description=&quot;First Input Delay (ms)&quot;)&#10;    cls: Optional[float] = Field(default=None, description=&quot;Cumulative Layout Shift&quot;)&#10;&#10;    # Metadata&#10;    error_message: Optional[str] = Field(default=None)&#10;    created_at: datetime = Field(default_factory=datetime.utcnow)&#10;    completed_at: Optional[datetime] = None&#10;&#10;    class Config:&#10;        json_schema_extra = {&#10;            &quot;example&quot;: {&#10;                &quot;status&quot;: &quot;completed&quot;,&#10;                &quot;performance_score&quot;: 85.5,&#10;                &quot;seo_score&quot;: 92.0,&#10;                &quot;lcp&quot;: 2400,&#10;                &quot;ai_suggestions&quot;: {&#10;                    &quot;summary&quot;: &quot;El sitio tiene buen SEO pero necesita mejorar rendimiento&quot;,&#10;                    &quot;actions&quot;: [&quot;Optimizar imágenes&quot;, &quot;Reducir JavaScript&quot;]&#10;                }&#10;            }&#10;        }&#10;&#10;" />
              <option name="updatedContent" value="&quot;&quot;&quot;&#10;Modelo de Reporte de Auditoría.&#10;Almacena resultados de análisis Lighthouse + IA.&#10;&quot;&quot;&quot;&#10;from sqlmodel import SQLModel, Field, Column&#10;from sqlalchemy import JSON, String&#10;from typing import Optional, Dict, Any&#10;from uuid import UUID, uuid4&#10;from datetime import datetime&#10;from enum import Enum&#10;&#10;&#10;class AuditStatus(str, Enum):&#10;    &quot;&quot;&quot;Estado del proceso de auditoría&quot;&quot;&quot;&#10;    PENDING = &quot;pending&quot;&#10;    IN_PROGRESS = &quot;in_progress&quot;&#10;    COMPLETED = &quot;completed&quot;&#10;    FAILED = &quot;failed&quot;&#10;&#10;&#10;class AuditReport(SQLModel, table=True):&#10;    &quot;&quot;&quot;&#10;    Reporte de auditoría SEO/Performance.&#10;    Contiene datos estructurados de Lighthouse y análisis de IA.&#10;    &quot;&quot;&quot;&#10;    __tablename__ = &quot;audit_reports&quot;&#10;&#10;    id: UUID = Field(default_factory=uuid4, primary_key=True)&#10;&#10;    # Relaciones&#10;    web_page_id: UUID = Field(foreign_key=&quot;web_pages.id&quot;, index=True)&#10;    user_id: UUID = Field(foreign_key=&quot;users.id&quot;, index=True)&#10;&#10;    # Estado (guardado como string en la BD)&#10;    status: AuditStatus = Field(&#10;        default=AuditStatus.PENDING,&#10;        sa_column=Column(String, nullable=False, default=AuditStatus.PENDING.value)&#10;    )&#10;&#10;    # Datos de Lighthouse (JSONB)&#10;    lighthouse_data: Optional[Dict[str, Any]] = Field(&#10;        default=None,&#10;        sa_column=Column(JSON),&#10;        description=&quot;Métricas completas de Lighthouse&quot;&#10;    )&#10;&#10;    seo_analysis: Optional[Dict[str, Any]] = Field(&#10;        default=None,&#10;        sa_column=Column(JSON),&#10;        description=&quot;Seo analyzer data&quot;&#10;    )&#10;&#10;    # Análisis de IA (JSONB)&#10;    ai_suggestions: Optional[Dict[str, Any]] = Field(&#10;        default=None,&#10;        sa_column=Column(JSON),&#10;        description=&quot;Sugerencias y análisis generados por IA&quot;&#10;    )&#10;&#10;    # Métricas clave (para búsquedas rápidas)&#10;    performance_score: Optional[float] = Field(default=None, ge=0, le=100)&#10;    seo_score: Optional[float] = Field(default=None, ge=0, le=100)&#10;    accessibility_score: Optional[float] = Field(default=None, ge=0, le=100)&#10;    best_practices_score: Optional[float] = Field(default=None, ge=0, le=100)&#10;&#10;    # Core Web Vitals&#10;    lcp: Optional[float] = Field(default=None, description=&quot;Largest Contentful Paint (ms)&quot;)&#10;    fid: Optional[float] = Field(default=None, description=&quot;First Input Delay (ms)&quot;)&#10;    cls: Optional[float] = Field(default=None, description=&quot;Cumulative Layout Shift&quot;)&#10;&#10;    # Metadata&#10;    error_message: Optional[str] = Field(default=None)&#10;    created_at: datetime = Field(default_factory=datetime.utcnow)&#10;    completed_at: Optional[datetime] = None&#10;&#10;    class Config:&#10;        json_schema_extra = {&#10;            &quot;example&quot;: {&#10;                &quot;status&quot;: &quot;completed&quot;,&#10;                &quot;performance_score&quot;: 85.5,&#10;                &quot;seo_score&quot;: 92.0,&#10;                &quot;lcp&quot;: 2400,&#10;                &quot;ai_suggestions&quot;: {&#10;                    &quot;summary&quot;: &quot;El sitio tiene buen SEO pero necesita mejorar rendimiento&quot;,&#10;                    &quot;actions&quot;: [&quot;Optimizar imágenes&quot;, &quot;Reducir JavaScript&quot;]&#10;                }&#10;            }&#10;        }&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>